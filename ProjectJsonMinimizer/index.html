<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Minimizer</title>
		<link rel="stylesheet" href="style.css"/>
    </head>
    <body>
		<div class=uppertext>
			<span class=title>Scratch 3 project.json minimizer</title>
		</div>
		<div class=inb>
			<div class=warning>
				<span class=warningTitle>Warning</span>
				<br>
				Under <a href="https://scratch.mit.edu/projects/505513306/#comments-294216939">specific conditions</a>, there's a chance your project may get corrupted. Make backups. It will be fixed later.
			</div>
			<div class=buttonHolder><input type=text placeholder="Project URL or id here" id=urlInput class=urlInput><button onclick=Loader.loadFromUrl() id=loadFromUrl>Load from URL</button><div class=divider></div><button onclick=Loader.loadFromFile() id=loadFromFile>Select local file</button></div>
			<span id=importError class=redText></span>
			<hr>
			<span title="Monitors are things that show some value on the stage. They have position and can show variables, lists and other properties of a sprite. If they were shown once, their position will be saved permanently taking up valuable project.json space. This option deletes monitors which are considered unused. Monitors are consiered unused if they are hidden and are not refferenced by showing and hiding blocks">Clear unused monitors</span><input type=checkbox id=c0 checked><br>
			<span title="When the block is inserted into the input of the other block, the original value of that input remains taking up project.json space. They can't be removed entirely, because it breaks project. With this option enabled, those values are set to empty, which are still valid, but take up less space. Also, you may notice that it inserts 0s in some cases. That is done in places where numeric values are expected. 0 takes up less space than two double quotes which are used to indicate empty text input.">Make covered values empty</span><input type=checkbox id=c1 checked><br>
			<span title="Scratch projects consit of a lot of things connected to one another. Those connections are done by giving every thing a 20 character unique identifier, and refferencing other things using them. 20 characters is a lot considering that on average every scratch block has 4 of those, and there is no reason why they should be so long. Reducing their size doesn't break anything, so this option does exactly that.">Reduce identifier size</span><input type=checkbox id=c2 checked><br>
			<hr>
			Result:
			<span id=message>nothing yet</span>
			<div class=total>
				<div class=new id=new>
				</div>
				<div class=old id=old>
				</div>
			</div>
			<span id=waitForDownload style="display:none;">(Please wait. The download of compressed file should start soon)</span>
			<input type=file class=hidden id=filePicker accept=".sb3, .zip, .json">
		</div>
		<br>
		<br>
		<br>
		<a href=https://scratch.mit.edu/users/Vadik1/>Vadik1 on Scratch</a> | <a href=https://github.com/Xeltalliv/ScratchTools/blob/main/README.md>Other tools</a> | <a href=https://github.com/Xeltalliv/ScratchTools/tree/main/ProjectJsonMinimizer>Source code</a>
		<script src=../vendor/JSZip/jszip.js></script>
		<script src=../vendor/FileSaver/FileSaver.js></script>

		<script src=main.js></script>
	</body>
</html>